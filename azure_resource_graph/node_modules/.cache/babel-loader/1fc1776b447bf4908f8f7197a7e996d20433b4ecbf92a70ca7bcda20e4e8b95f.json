{"ast":null,"code":"/**\n * Graphology CirclePack Layout\n * =============================\n *\n * Circlepack layout from d3-hierarchy/gephi.\n */\nvar resolveDefaults = require('graphology-utils/defaults');\nvar isGraph = require('graphology-utils/is-graph');\nvar shuffle = require('pandemonium/shuffle-in-place');\n\n/**\n * Default options.\n */\nvar DEFAULTS = {\n  attributes: {\n    x: 'x',\n    y: 'y'\n  },\n  center: 0,\n  hierarchyAttributes: [],\n  rng: Math.random,\n  scale: 1\n};\n\n/**\n * Helpers.\n */\nfunction CircleWrap(id, x, y, r, circleWrap) {\n  this.wrappedCircle = circleWrap || null; //hacky d3 reference thing\n\n  this.children = {};\n  this.countChildren = 0;\n  this.id = id || null;\n  this.next = null;\n  this.previous = null;\n  this.x = x || null;\n  this.y = y || null;\n  if (circleWrap) this.r = 1010101;\n  // for debugging purposes - should not be used in this case\n  else this.r = r || 999;\n}\nCircleWrap.prototype.hasChildren = function () {\n  return this.countChildren > 0;\n};\nCircleWrap.prototype.addChild = function (id, child) {\n  this.children[id] = child;\n  ++this.countChildren;\n};\nCircleWrap.prototype.getChild = function (id) {\n  if (!this.children.hasOwnProperty(id)) {\n    var circleWrap = new CircleWrap();\n    this.children[id] = circleWrap;\n    ++this.countChildren;\n  }\n  return this.children[id];\n};\nCircleWrap.prototype.applyPositionToChildren = function () {\n  if (this.hasChildren()) {\n    var root = this; // using 'this' in Object.keys.forEach seems a bad idea\n    for (var key in root.children) {\n      var child = root.children[key];\n      child.x += root.x;\n      child.y += root.y;\n      child.applyPositionToChildren();\n    }\n  }\n};\nfunction setNode(/*Graph*/graph, /*CircleWrap*/parentCircle, /*Map*/posMap) {\n  for (var key in parentCircle.children) {\n    var circle = parentCircle.children[key];\n    if (circle.hasChildren()) {\n      setNode(graph, circle, posMap);\n    } else {\n      posMap[circle.id] = {\n        x: circle.x,\n        y: circle.y\n      };\n    }\n  }\n}\nfunction enclosesNot(/*CircleWrap*/a, /*CircleWrap*/b) {\n  var dr = a.r - b.r;\n  var dx = b.x - a.x;\n  var dy = b.y - a.y;\n  return dr < 0 || dr * dr < dx * dx + dy * dy;\n}\nfunction enclosesWeak(/*CircleWrap*/a, /*CircleWrap*/b) {\n  var dr = a.r - b.r + 1e-6;\n  var dx = b.x - a.x;\n  var dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\nfunction enclosesWeakAll(/*CircleWrap*/a, /*Array<CircleWrap>*/B) {\n  for (var i = 0; i < B.length; ++i) {\n    if (!enclosesWeak(a, B[i])) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction encloseBasis1(/*CircleWrap*/a) {\n  return new CircleWrap(null, a.x, a.y, a.r);\n}\nfunction encloseBasis2(/*CircleWrap*/a, /*CircleWrap*/b) {\n  var x1 = a.x,\n    y1 = a.y,\n    r1 = a.r,\n    x2 = b.x,\n    y2 = b.y,\n    r2 = b.r,\n    x21 = x2 - x1,\n    y21 = y2 - y1,\n    r21 = r2 - r1,\n    l = Math.sqrt(x21 * x21 + y21 * y21);\n  return new CircleWrap(null, (x1 + x2 + x21 / l * r21) / 2, (y1 + y2 + y21 / l * r21) / 2, (l + r1 + r2) / 2);\n}\nfunction encloseBasis3(/*CircleWrap*/a, /*CircleWrap*/b, /*CircleWrap*/c) {\n  var x1 = a.x,\n    y1 = a.y,\n    r1 = a.r,\n    x2 = b.x,\n    y2 = b.y,\n    r2 = b.r,\n    x3 = c.x,\n    y3 = c.y,\n    r3 = c.r,\n    a2 = x1 - x2,\n    a3 = x1 - x3,\n    b2 = y1 - y2,\n    b3 = y1 - y3,\n    c2 = r2 - r1,\n    c3 = r3 - r1,\n    d1 = x1 * x1 + y1 * y1 - r1 * r1,\n    d2 = d1 - x2 * x2 - y2 * y2 + r2 * r2,\n    d3 = d1 - x3 * x3 - y3 * y3 + r3 * r3,\n    ab = a3 * b2 - a2 * b3,\n    xa = (b2 * d3 - b3 * d2) / (ab * 2) - x1,\n    xb = (b3 * c2 - b2 * c3) / ab,\n    ya = (a3 * d2 - a2 * d3) / (ab * 2) - y1,\n    yb = (a2 * c3 - a3 * c2) / ab,\n    A = xb * xb + yb * yb - 1,\n    B = 2 * (r1 + xa * xb + ya * yb),\n    C = xa * xa + ya * ya - r1 * r1,\n    r = -(A ? (B + Math.sqrt(B * B - 4 * A * C)) / (2 * A) : C / B);\n  return new CircleWrap(null, x1 + xa + xb * r, y1 + ya + yb * r, r);\n}\nfunction encloseBasis(/*Array<CircleWrap>*/B) {\n  switch (B.length) {\n    case 1:\n      return encloseBasis1(B[0]);\n    case 2:\n      return encloseBasis2(B[0], B[1]);\n    case 3:\n      return encloseBasis3(B[0], B[1], B[2]);\n    default:\n      throw new Error('graphology-layout/circlepack: Invalid basis length ' + B.length);\n  }\n}\nfunction extendBasis(/*Array<CircleWrap>*/B, /*CircleWrap*/p) {\n  var i, j;\n  if (enclosesWeakAll(p, B)) return [p];\n\n  // If we get here then B must have at least one element.\n  for (i = 0; i < B.length; ++i) {\n    if (enclosesNot(p, B[i]) && enclosesWeakAll(encloseBasis2(B[i], p), B)) {\n      return [B[i], p];\n    }\n  }\n\n  // If we get here then B must have at least two elements.\n  for (i = 0; i < B.length - 1; ++i) {\n    for (j = i + 1; j < B.length; ++j) {\n      if (enclosesNot(encloseBasis2(B[i], B[j]), p) && enclosesNot(encloseBasis2(B[i], p), B[j]) && enclosesNot(encloseBasis2(B[j], p), B[i]) && enclosesWeakAll(encloseBasis3(B[i], B[j], p), B)) {\n        return [B[i], B[j], p];\n      }\n    }\n  }\n\n  // If we get here then something is very wrong.\n  throw new Error('graphology-layout/circlepack: extendBasis failure !');\n}\nfunction score(/*CircleWrap*/node) {\n  var a = node.wrappedCircle;\n  var b = node.next.wrappedCircle;\n  var ab = a.r + b.r;\n  var dx = (a.x * b.r + b.x * a.r) / ab;\n  var dy = (a.y * b.r + b.y * a.r) / ab;\n  return dx * dx + dy * dy;\n}\nfunction enclose(circles, shuffleFunc) {\n  var i = 0;\n  var circlesLoc = circles.slice();\n  var n = circles.length;\n  var B = [];\n  var p;\n  var e;\n  shuffleFunc(circlesLoc);\n  while (i < n) {\n    p = circlesLoc[i];\n    if (e && enclosesWeak(e, p)) {\n      ++i;\n    } else {\n      B = extendBasis(B, p);\n      e = encloseBasis(B);\n      i = 0;\n    }\n  }\n  return e;\n}\nfunction place(/*CircleWrap*/b, /*CircleWrap*/a, /*CircleWrap*/c) {\n  var dx = b.x - a.x,\n    x,\n    a2,\n    dy = b.y - a.y,\n    y,\n    b2,\n    d2 = dx * dx + dy * dy;\n  if (d2) {\n    a2 = a.r + c.r;\n    a2 *= a2;\n    b2 = b.r + c.r;\n    b2 *= b2;\n    if (a2 > b2) {\n      x = (d2 + b2 - a2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, b2 / d2 - x * x));\n      c.x = b.x - x * dx - y * dy;\n      c.y = b.y - x * dy + y * dx;\n    } else {\n      x = (d2 + a2 - b2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, a2 / d2 - x * x));\n      c.x = a.x + x * dx - y * dy;\n      c.y = a.y + x * dy + y * dx;\n    }\n  } else {\n    c.x = a.x + c.r;\n    c.y = a.y;\n  }\n}\nfunction intersects(/*CircleWrap*/a, /*CircleWrap*/b) {\n  var dr = a.r + b.r - 1e-6,\n    dx = b.x - a.x,\n    dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\nfunction packEnclose(/*Array<CircleWrap>*/circles, shuffleFunc) {\n  var n = circles.length;\n  if (n === 0) return 0;\n  var a, b, c, aa, ca, i, j, k, sj, sk;\n\n  // Place the first circle.\n  a = circles[0];\n  a.x = 0;\n  a.y = 0;\n  if (n <= 1) return a.r;\n\n  // Place the second circle.\n  b = circles[1];\n  a.x = -b.r;\n  b.x = a.r;\n  b.y = 0;\n  if (n <= 2) return a.r + b.r;\n\n  // Place the third circle.\n  c = circles[2];\n  place(b, a, c);\n\n  // Initialize the front-chain using the first three circles a, b and c.\n  a = new CircleWrap(null, null, null, null, a);\n  b = new CircleWrap(null, null, null, null, b);\n  c = new CircleWrap(null, null, null, null, c);\n  a.next = c.previous = b;\n  b.next = a.previous = c;\n  c.next = b.previous = a;\n\n  // Attempt to place each remaining circle…\n  pack: for (i = 3; i < n; ++i) {\n    c = circles[i];\n    place(a.wrappedCircle, b.wrappedCircle, c);\n    c = new CircleWrap(null, null, null, null, c);\n\n    // Find the closest intersecting circle on the front-chain, if any.\n    // “Closeness” is determined by linear distance along the front-chain.\n    // “Ahead” or “behind” is likewise determined by linear distance.\n    j = b.next;\n    k = a.previous;\n    sj = b.wrappedCircle.r;\n    sk = a.wrappedCircle.r;\n    do {\n      if (sj <= sk) {\n        if (intersects(j.wrappedCircle, c.wrappedCircle)) {\n          b = j;\n          a.next = b;\n          b.previous = a;\n          --i;\n          continue pack;\n        }\n        sj += j.wrappedCircle.r;\n        j = j.next;\n      } else {\n        if (intersects(k.wrappedCircle, c.wrappedCircle)) {\n          a = k;\n          a.next = b;\n          b.previous = a;\n          --i;\n          continue pack;\n        }\n        sk += k.wrappedCircle.r;\n        k = k.previous;\n      }\n    } while (j !== k.next);\n\n    // Success! Insert the new circle c between a and b.\n    c.previous = a;\n    c.next = b;\n    a.next = b.previous = b = c;\n\n    // Compute the new closest circle pair to the centroid.\n    aa = score(a);\n    while ((c = c.next) !== b) {\n      if ((ca = score(c)) < aa) {\n        a = c;\n        aa = ca;\n      }\n    }\n    b = a.next;\n  }\n\n  // Compute the enclosing circle of the front chain.\n  a = [b.wrappedCircle];\n  c = b;\n  var safety = 10000;\n  while ((c = c.next) !== b) {\n    if (--safety === 0) {\n      break;\n    }\n    a.push(c.wrappedCircle);\n  }\n  c = enclose(a, shuffleFunc);\n\n  // Translate the circles to put the enclosing circle around the origin.\n  for (i = 0; i < n; ++i) {\n    a = circles[i];\n    a.x -= c.x;\n    a.y -= c.y;\n  }\n  return c.r;\n}\nfunction packHierarchy(/*CircleWrap*/parentCircle, shuffleFunc) {\n  var r = 0;\n  if (parentCircle.hasChildren()) {\n    //pack the children first because the radius is determined by how the children get packed (recursive)\n    for (var key in parentCircle.children) {\n      var circle = parentCircle.children[key];\n      if (circle.hasChildren()) {\n        circle.r = packHierarchy(circle, shuffleFunc);\n      }\n    }\n    //now that each circle has a radius set by its children, pack the circles at this level\n    r = packEnclose(Object.values(parentCircle.children), shuffleFunc);\n  }\n  return r;\n}\nfunction packHierarchyAndShift(/*CircleWrap*/parentCircle, shuffleFunc) {\n  packHierarchy(parentCircle, shuffleFunc);\n  for (var key in parentCircle.children) {\n    var circle = parentCircle.children[key];\n    circle.applyPositionToChildren();\n  }\n}\n\n/**\n * Abstract function running the layout.\n *\n * @param  {Graph}    graph                   - Target  graph.\n * @param  {object}   [options]               - Options:\n * @param  {object}     [attributes]          - Attributes names to map.\n * @param  {number}     [center]              - Center of the layout.\n * @param  {string[]}   [hierarchyAttributes] - List of attributes used for the layout in decreasing order.\n * @param  {function}   [rng]                 - Custom RNG function to be used.\n * @param  {number}     [scale]               - Scale of the layout.\n * @return {object}                           - The positions by node.\n */\nfunction genericCirclePackLayout(assign, graph, options) {\n  if (!isGraph(graph)) throw new Error('graphology-layout/circlepack: the given graph is not a valid graphology instance.');\n  options = resolveDefaults(options, DEFAULTS);\n  var posMap = {},\n    positions = {},\n    nodes = graph.nodes(),\n    center = options.center,\n    hierarchyAttributes = options.hierarchyAttributes,\n    shuffleFunc = shuffle.createShuffleInPlace(options.rng),\n    scale = options.scale;\n  var container = new CircleWrap();\n  graph.forEachNode(function (key, attributes) {\n    var r = attributes.size ? attributes.size : 1;\n    var newCircleWrap = new CircleWrap(key, null, null, r);\n    var parentContainer = container;\n    hierarchyAttributes.forEach(function (v) {\n      var attr = attributes[v];\n      parentContainer = parentContainer.getChild(attr);\n    });\n    parentContainer.addChild(key, newCircleWrap);\n  });\n  packHierarchyAndShift(container, shuffleFunc);\n  setNode(graph, container, posMap);\n  var l = nodes.length,\n    x,\n    y,\n    i;\n  for (i = 0; i < l; i++) {\n    var node = nodes[i];\n    x = center + scale * posMap[node].x;\n    y = center + scale * posMap[node].y;\n    positions[node] = {\n      x: x,\n      y: y\n    };\n    if (assign) {\n      graph.setNodeAttribute(node, options.attributes.x, x);\n      graph.setNodeAttribute(node, options.attributes.y, y);\n    }\n  }\n  return positions;\n}\nvar circlePackLayout = genericCirclePackLayout.bind(null, false);\ncirclePackLayout.assign = genericCirclePackLayout.bind(null, true);\nmodule.exports = circlePackLayout;","map":{"version":3,"names":["resolveDefaults","require","isGraph","shuffle","DEFAULTS","attributes","x","y","center","hierarchyAttributes","rng","Math","random","scale","CircleWrap","id","r","circleWrap","wrappedCircle","children","countChildren","next","previous","prototype","hasChildren","addChild","child","getChild","hasOwnProperty","applyPositionToChildren","root","key","setNode","graph","parentCircle","posMap","circle","enclosesNot","a","b","dr","dx","dy","enclosesWeak","enclosesWeakAll","B","i","length","encloseBasis1","encloseBasis2","x1","y1","r1","x2","y2","r2","x21","y21","r21","l","sqrt","encloseBasis3","c","x3","y3","r3","a2","a3","b2","b3","c2","c3","d1","d2","d3","ab","xa","xb","ya","yb","A","C","encloseBasis","Error","extendBasis","p","j","score","node","enclose","circles","shuffleFunc","circlesLoc","slice","n","e","place","max","intersects","packEnclose","aa","ca","k","sj","sk","pack","safety","push","packHierarchy","Object","values","packHierarchyAndShift","genericCirclePackLayout","assign","options","positions","nodes","createShuffleInPlace","container","forEachNode","size","newCircleWrap","parentContainer","forEach","v","attr","setNodeAttribute","circlePackLayout","bind","module","exports"],"sources":["/Users/fjodoin/Desktop/Research/AzureRT/azure_resource_graph/training/graphing/sigma-graph/node_modules/graphology-layout/circlepack.js"],"sourcesContent":["/**\n * Graphology CirclePack Layout\n * =============================\n *\n * Circlepack layout from d3-hierarchy/gephi.\n */\nvar resolveDefaults = require('graphology-utils/defaults');\nvar isGraph = require('graphology-utils/is-graph');\nvar shuffle = require('pandemonium/shuffle-in-place');\n\n/**\n * Default options.\n */\nvar DEFAULTS = {\n  attributes: {\n    x: 'x',\n    y: 'y'\n  },\n  center: 0,\n  hierarchyAttributes: [],\n  rng: Math.random,\n  scale: 1\n};\n\n/**\n * Helpers.\n */\nfunction CircleWrap(id, x, y, r, circleWrap) {\n  this.wrappedCircle = circleWrap || null; //hacky d3 reference thing\n\n  this.children = {};\n  this.countChildren = 0;\n  this.id = id || null;\n  this.next = null;\n  this.previous = null;\n\n  this.x = x || null;\n  this.y = y || null;\n  if (circleWrap) this.r = 1010101;\n  // for debugging purposes - should not be used in this case\n  else this.r = r || 999;\n}\n\nCircleWrap.prototype.hasChildren = function () {\n  return this.countChildren > 0;\n};\n\nCircleWrap.prototype.addChild = function (id, child) {\n  this.children[id] = child;\n  ++this.countChildren;\n};\n\nCircleWrap.prototype.getChild = function (id) {\n  if (!this.children.hasOwnProperty(id)) {\n    var circleWrap = new CircleWrap();\n    this.children[id] = circleWrap;\n    ++this.countChildren;\n  }\n  return this.children[id];\n};\n\nCircleWrap.prototype.applyPositionToChildren = function () {\n  if (this.hasChildren()) {\n    var root = this; // using 'this' in Object.keys.forEach seems a bad idea\n    for (var key in root.children) {\n      var child = root.children[key];\n      child.x += root.x;\n      child.y += root.y;\n      child.applyPositionToChildren();\n    }\n  }\n};\n\nfunction setNode(/*Graph*/ graph, /*CircleWrap*/ parentCircle, /*Map*/ posMap) {\n  for (var key in parentCircle.children) {\n    var circle = parentCircle.children[key];\n    if (circle.hasChildren()) {\n      setNode(graph, circle, posMap);\n    } else {\n      posMap[circle.id] = {x: circle.x, y: circle.y};\n    }\n  }\n}\n\nfunction enclosesNot(/*CircleWrap*/ a, /*CircleWrap*/ b) {\n  var dr = a.r - b.r;\n  var dx = b.x - a.x;\n  var dy = b.y - a.y;\n  return dr < 0 || dr * dr < dx * dx + dy * dy;\n}\n\nfunction enclosesWeak(/*CircleWrap*/ a, /*CircleWrap*/ b) {\n  var dr = a.r - b.r + 1e-6;\n  var dx = b.x - a.x;\n  var dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction enclosesWeakAll(/*CircleWrap*/ a, /*Array<CircleWrap>*/ B) {\n  for (var i = 0; i < B.length; ++i) {\n    if (!enclosesWeak(a, B[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction encloseBasis1(/*CircleWrap*/ a) {\n  return new CircleWrap(null, a.x, a.y, a.r);\n}\n\nfunction encloseBasis2(/*CircleWrap*/ a, /*CircleWrap*/ b) {\n  var x1 = a.x,\n    y1 = a.y,\n    r1 = a.r,\n    x2 = b.x,\n    y2 = b.y,\n    r2 = b.r,\n    x21 = x2 - x1,\n    y21 = y2 - y1,\n    r21 = r2 - r1,\n    l = Math.sqrt(x21 * x21 + y21 * y21);\n  return new CircleWrap(\n    null,\n    (x1 + x2 + (x21 / l) * r21) / 2,\n    (y1 + y2 + (y21 / l) * r21) / 2,\n    (l + r1 + r2) / 2\n  );\n}\n\nfunction encloseBasis3(/*CircleWrap*/ a, /*CircleWrap*/ b, /*CircleWrap*/ c) {\n  var x1 = a.x,\n    y1 = a.y,\n    r1 = a.r,\n    x2 = b.x,\n    y2 = b.y,\n    r2 = b.r,\n    x3 = c.x,\n    y3 = c.y,\n    r3 = c.r,\n    a2 = x1 - x2,\n    a3 = x1 - x3,\n    b2 = y1 - y2,\n    b3 = y1 - y3,\n    c2 = r2 - r1,\n    c3 = r3 - r1,\n    d1 = x1 * x1 + y1 * y1 - r1 * r1,\n    d2 = d1 - x2 * x2 - y2 * y2 + r2 * r2,\n    d3 = d1 - x3 * x3 - y3 * y3 + r3 * r3,\n    ab = a3 * b2 - a2 * b3,\n    xa = (b2 * d3 - b3 * d2) / (ab * 2) - x1,\n    xb = (b3 * c2 - b2 * c3) / ab,\n    ya = (a3 * d2 - a2 * d3) / (ab * 2) - y1,\n    yb = (a2 * c3 - a3 * c2) / ab,\n    A = xb * xb + yb * yb - 1,\n    B = 2 * (r1 + xa * xb + ya * yb),\n    C = xa * xa + ya * ya - r1 * r1,\n    r = -(A ? (B + Math.sqrt(B * B - 4 * A * C)) / (2 * A) : C / B);\n  return new CircleWrap(null, x1 + xa + xb * r, y1 + ya + yb * r, r);\n}\n\nfunction encloseBasis(/*Array<CircleWrap>*/ B) {\n  switch (B.length) {\n    case 1:\n      return encloseBasis1(B[0]);\n    case 2:\n      return encloseBasis2(B[0], B[1]);\n    case 3:\n      return encloseBasis3(B[0], B[1], B[2]);\n    default:\n      throw new Error(\n        'graphology-layout/circlepack: Invalid basis length ' + B.length\n      );\n  }\n}\n\nfunction extendBasis(/*Array<CircleWrap>*/ B, /*CircleWrap*/ p) {\n  var i, j;\n\n  if (enclosesWeakAll(p, B)) return [p];\n\n  // If we get here then B must have at least one element.\n  for (i = 0; i < B.length; ++i) {\n    if (enclosesNot(p, B[i]) && enclosesWeakAll(encloseBasis2(B[i], p), B)) {\n      return [B[i], p];\n    }\n  }\n\n  // If we get here then B must have at least two elements.\n  for (i = 0; i < B.length - 1; ++i) {\n    for (j = i + 1; j < B.length; ++j) {\n      if (\n        enclosesNot(encloseBasis2(B[i], B[j]), p) &&\n        enclosesNot(encloseBasis2(B[i], p), B[j]) &&\n        enclosesNot(encloseBasis2(B[j], p), B[i]) &&\n        enclosesWeakAll(encloseBasis3(B[i], B[j], p), B)\n      ) {\n        return [B[i], B[j], p];\n      }\n    }\n  }\n\n  // If we get here then something is very wrong.\n  throw new Error('graphology-layout/circlepack: extendBasis failure !');\n}\n\nfunction score(/*CircleWrap*/ node) {\n  var a = node.wrappedCircle;\n  var b = node.next.wrappedCircle;\n  var ab = a.r + b.r;\n  var dx = (a.x * b.r + b.x * a.r) / ab;\n  var dy = (a.y * b.r + b.y * a.r) / ab;\n  return dx * dx + dy * dy;\n}\n\nfunction enclose(circles, shuffleFunc) {\n  var i = 0;\n  var circlesLoc = circles.slice();\n\n  var n = circles.length;\n  var B = [];\n  var p;\n  var e;\n  shuffleFunc(circlesLoc);\n  while (i < n) {\n    p = circlesLoc[i];\n    if (e && enclosesWeak(e, p)) {\n      ++i;\n    } else {\n      B = extendBasis(B, p);\n      e = encloseBasis(B);\n      i = 0;\n    }\n  }\n  return e;\n}\n\nfunction place(/*CircleWrap*/ b, /*CircleWrap*/ a, /*CircleWrap*/ c) {\n  var dx = b.x - a.x,\n    x,\n    a2,\n    dy = b.y - a.y,\n    y,\n    b2,\n    d2 = dx * dx + dy * dy;\n  if (d2) {\n    a2 = a.r + c.r;\n    a2 *= a2;\n    b2 = b.r + c.r;\n    b2 *= b2;\n    if (a2 > b2) {\n      x = (d2 + b2 - a2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, b2 / d2 - x * x));\n      c.x = b.x - x * dx - y * dy;\n      c.y = b.y - x * dy + y * dx;\n    } else {\n      x = (d2 + a2 - b2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, a2 / d2 - x * x));\n      c.x = a.x + x * dx - y * dy;\n      c.y = a.y + x * dy + y * dx;\n    }\n  } else {\n    c.x = a.x + c.r;\n    c.y = a.y;\n  }\n}\n\nfunction intersects(/*CircleWrap*/ a, /*CircleWrap*/ b) {\n  var dr = a.r + b.r - 1e-6,\n    dx = b.x - a.x,\n    dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction packEnclose(/*Array<CircleWrap>*/ circles, shuffleFunc) {\n  var n = circles.length;\n  if (n === 0) return 0;\n\n  var a, b, c, aa, ca, i, j, k, sj, sk;\n\n  // Place the first circle.\n  a = circles[0];\n  a.x = 0;\n  a.y = 0;\n  if (n <= 1) return a.r;\n\n  // Place the second circle.\n  b = circles[1];\n  a.x = -b.r;\n  b.x = a.r;\n  b.y = 0;\n  if (n <= 2) return a.r + b.r;\n\n  // Place the third circle.\n  c = circles[2];\n  place(b, a, c);\n\n  // Initialize the front-chain using the first three circles a, b and c.\n  a = new CircleWrap(null, null, null, null, a);\n  b = new CircleWrap(null, null, null, null, b);\n  c = new CircleWrap(null, null, null, null, c);\n  a.next = c.previous = b;\n  b.next = a.previous = c;\n  c.next = b.previous = a;\n\n  // Attempt to place each remaining circle…\n  pack: for (i = 3; i < n; ++i) {\n    c = circles[i];\n    place(a.wrappedCircle, b.wrappedCircle, c);\n    c = new CircleWrap(null, null, null, null, c);\n\n    // Find the closest intersecting circle on the front-chain, if any.\n    // “Closeness” is determined by linear distance along the front-chain.\n    // “Ahead” or “behind” is likewise determined by linear distance.\n    j = b.next;\n    k = a.previous;\n    sj = b.wrappedCircle.r;\n    sk = a.wrappedCircle.r;\n    do {\n      if (sj <= sk) {\n        if (intersects(j.wrappedCircle, c.wrappedCircle)) {\n          b = j;\n          a.next = b;\n          b.previous = a;\n          --i;\n          continue pack;\n        }\n        sj += j.wrappedCircle.r;\n        j = j.next;\n      } else {\n        if (intersects(k.wrappedCircle, c.wrappedCircle)) {\n          a = k;\n          a.next = b;\n          b.previous = a;\n          --i;\n          continue pack;\n        }\n        sk += k.wrappedCircle.r;\n        k = k.previous;\n      }\n    } while (j !== k.next);\n\n    // Success! Insert the new circle c between a and b.\n    c.previous = a;\n    c.next = b;\n    a.next = b.previous = b = c;\n\n    // Compute the new closest circle pair to the centroid.\n    aa = score(a);\n    while ((c = c.next) !== b) {\n      if ((ca = score(c)) < aa) {\n        a = c;\n        aa = ca;\n      }\n    }\n    b = a.next;\n  }\n\n  // Compute the enclosing circle of the front chain.\n  a = [b.wrappedCircle];\n  c = b;\n  var safety = 10000;\n  while ((c = c.next) !== b) {\n    if (--safety === 0) {\n      break;\n    }\n    a.push(c.wrappedCircle);\n  }\n  c = enclose(a, shuffleFunc);\n\n  // Translate the circles to put the enclosing circle around the origin.\n  for (i = 0; i < n; ++i) {\n    a = circles[i];\n    a.x -= c.x;\n    a.y -= c.y;\n  }\n  return c.r;\n}\n\nfunction packHierarchy(/*CircleWrap*/ parentCircle, shuffleFunc) {\n  var r = 0;\n  if (parentCircle.hasChildren()) {\n    //pack the children first because the radius is determined by how the children get packed (recursive)\n    for (var key in parentCircle.children) {\n      var circle = parentCircle.children[key];\n      if (circle.hasChildren()) {\n        circle.r = packHierarchy(circle, shuffleFunc);\n      }\n    }\n    //now that each circle has a radius set by its children, pack the circles at this level\n    r = packEnclose(Object.values(parentCircle.children), shuffleFunc);\n  }\n  return r;\n}\n\nfunction packHierarchyAndShift(/*CircleWrap*/ parentCircle, shuffleFunc) {\n  packHierarchy(parentCircle, shuffleFunc);\n  for (var key in parentCircle.children) {\n    var circle = parentCircle.children[key];\n    circle.applyPositionToChildren();\n  }\n}\n\n/**\n * Abstract function running the layout.\n *\n * @param  {Graph}    graph                   - Target  graph.\n * @param  {object}   [options]               - Options:\n * @param  {object}     [attributes]          - Attributes names to map.\n * @param  {number}     [center]              - Center of the layout.\n * @param  {string[]}   [hierarchyAttributes] - List of attributes used for the layout in decreasing order.\n * @param  {function}   [rng]                 - Custom RNG function to be used.\n * @param  {number}     [scale]               - Scale of the layout.\n * @return {object}                           - The positions by node.\n */\nfunction genericCirclePackLayout(assign, graph, options) {\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-layout/circlepack: the given graph is not a valid graphology instance.'\n    );\n\n  options = resolveDefaults(options, DEFAULTS);\n\n  var posMap = {},\n    positions = {},\n    nodes = graph.nodes(),\n    center = options.center,\n    hierarchyAttributes = options.hierarchyAttributes,\n    shuffleFunc = shuffle.createShuffleInPlace(options.rng),\n    scale = options.scale;\n\n  var container = new CircleWrap();\n\n  graph.forEachNode(function (key, attributes) {\n    var r = attributes.size ? attributes.size : 1;\n    var newCircleWrap = new CircleWrap(key, null, null, r);\n    var parentContainer = container;\n\n    hierarchyAttributes.forEach(function (v) {\n      var attr = attributes[v];\n      parentContainer = parentContainer.getChild(attr);\n    });\n\n    parentContainer.addChild(key, newCircleWrap);\n  });\n  packHierarchyAndShift(container, shuffleFunc);\n  setNode(graph, container, posMap);\n  var l = nodes.length,\n    x,\n    y,\n    i;\n  for (i = 0; i < l; i++) {\n    var node = nodes[i];\n\n    x = center + scale * posMap[node].x;\n    y = center + scale * posMap[node].y;\n\n    positions[node] = {\n      x: x,\n      y: y\n    };\n\n    if (assign) {\n      graph.setNodeAttribute(node, options.attributes.x, x);\n      graph.setNodeAttribute(node, options.attributes.y, y);\n    }\n  }\n  return positions;\n}\n\nvar circlePackLayout = genericCirclePackLayout.bind(null, false);\ncirclePackLayout.assign = genericCirclePackLayout.bind(null, true);\n\nmodule.exports = circlePackLayout;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,eAAe,GAAGC,OAAO,CAAC,2BAA2B,CAAC;AAC1D,IAAIC,OAAO,GAAGD,OAAO,CAAC,2BAA2B,CAAC;AAClD,IAAIE,OAAO,GAAGF,OAAO,CAAC,8BAA8B,CAAC;;AAErD;AACA;AACA;AACA,IAAIG,QAAQ,GAAG;EACbC,UAAU,EAAE;IACVC,CAAC,EAAE,GAAG;IACNC,CAAC,EAAE;EACL,CAAC;EACDC,MAAM,EAAE,CAAC;EACTC,mBAAmB,EAAE,EAAE;EACvBC,GAAG,EAAEC,IAAI,CAACC,MAAM;EAChBC,KAAK,EAAE;AACT,CAAC;;AAED;AACA;AACA;AACA,SAASC,UAAUA,CAACC,EAAE,EAAET,CAAC,EAAEC,CAAC,EAAES,CAAC,EAAEC,UAAU,EAAE;EAC3C,IAAI,CAACC,aAAa,GAAGD,UAAU,IAAI,IAAI,CAAC,CAAC;;EAEzC,IAAI,CAACE,QAAQ,GAAG,CAAC,CAAC;EAClB,IAAI,CAACC,aAAa,GAAG,CAAC;EACtB,IAAI,CAACL,EAAE,GAAGA,EAAE,IAAI,IAAI;EACpB,IAAI,CAACM,IAAI,GAAG,IAAI;EAChB,IAAI,CAACC,QAAQ,GAAG,IAAI;EAEpB,IAAI,CAAChB,CAAC,GAAGA,CAAC,IAAI,IAAI;EAClB,IAAI,CAACC,CAAC,GAAGA,CAAC,IAAI,IAAI;EAClB,IAAIU,UAAU,EAAE,IAAI,CAACD,CAAC,GAAG,OAAO;EAChC;EAAA,KACK,IAAI,CAACA,CAAC,GAAGA,CAAC,IAAI,GAAG;AACxB;AAEAF,UAAU,CAACS,SAAS,CAACC,WAAW,GAAG,YAAY;EAC7C,OAAO,IAAI,CAACJ,aAAa,GAAG,CAAC;AAC/B,CAAC;AAEDN,UAAU,CAACS,SAAS,CAACE,QAAQ,GAAG,UAAUV,EAAE,EAAEW,KAAK,EAAE;EACnD,IAAI,CAACP,QAAQ,CAACJ,EAAE,CAAC,GAAGW,KAAK;EACzB,EAAE,IAAI,CAACN,aAAa;AACtB,CAAC;AAEDN,UAAU,CAACS,SAAS,CAACI,QAAQ,GAAG,UAAUZ,EAAE,EAAE;EAC5C,IAAI,CAAC,IAAI,CAACI,QAAQ,CAACS,cAAc,CAACb,EAAE,CAAC,EAAE;IACrC,IAAIE,UAAU,GAAG,IAAIH,UAAU,CAAC,CAAC;IACjC,IAAI,CAACK,QAAQ,CAACJ,EAAE,CAAC,GAAGE,UAAU;IAC9B,EAAE,IAAI,CAACG,aAAa;EACtB;EACA,OAAO,IAAI,CAACD,QAAQ,CAACJ,EAAE,CAAC;AAC1B,CAAC;AAEDD,UAAU,CAACS,SAAS,CAACM,uBAAuB,GAAG,YAAY;EACzD,IAAI,IAAI,CAACL,WAAW,CAAC,CAAC,EAAE;IACtB,IAAIM,IAAI,GAAG,IAAI,CAAC,CAAC;IACjB,KAAK,IAAIC,GAAG,IAAID,IAAI,CAACX,QAAQ,EAAE;MAC7B,IAAIO,KAAK,GAAGI,IAAI,CAACX,QAAQ,CAACY,GAAG,CAAC;MAC9BL,KAAK,CAACpB,CAAC,IAAIwB,IAAI,CAACxB,CAAC;MACjBoB,KAAK,CAACnB,CAAC,IAAIuB,IAAI,CAACvB,CAAC;MACjBmB,KAAK,CAACG,uBAAuB,CAAC,CAAC;IACjC;EACF;AACF,CAAC;AAED,SAASG,OAAOA,CAAC,SAAUC,KAAK,EAAE,cAAeC,YAAY,EAAE,OAAQC,MAAM,EAAE;EAC7E,KAAK,IAAIJ,GAAG,IAAIG,YAAY,CAACf,QAAQ,EAAE;IACrC,IAAIiB,MAAM,GAAGF,YAAY,CAACf,QAAQ,CAACY,GAAG,CAAC;IACvC,IAAIK,MAAM,CAACZ,WAAW,CAAC,CAAC,EAAE;MACxBQ,OAAO,CAACC,KAAK,EAAEG,MAAM,EAAED,MAAM,CAAC;IAChC,CAAC,MAAM;MACLA,MAAM,CAACC,MAAM,CAACrB,EAAE,CAAC,GAAG;QAACT,CAAC,EAAE8B,MAAM,CAAC9B,CAAC;QAAEC,CAAC,EAAE6B,MAAM,CAAC7B;MAAC,CAAC;IAChD;EACF;AACF;AAEA,SAAS8B,WAAWA,CAAC,cAAeC,CAAC,EAAE,cAAeC,CAAC,EAAE;EACvD,IAAIC,EAAE,GAAGF,CAAC,CAACtB,CAAC,GAAGuB,CAAC,CAACvB,CAAC;EAClB,IAAIyB,EAAE,GAAGF,CAAC,CAACjC,CAAC,GAAGgC,CAAC,CAAChC,CAAC;EAClB,IAAIoC,EAAE,GAAGH,CAAC,CAAChC,CAAC,GAAG+B,CAAC,CAAC/B,CAAC;EAClB,OAAOiC,EAAE,GAAG,CAAC,IAAIA,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;AAC9C;AAEA,SAASC,YAAYA,CAAC,cAAeL,CAAC,EAAE,cAAeC,CAAC,EAAE;EACxD,IAAIC,EAAE,GAAGF,CAAC,CAACtB,CAAC,GAAGuB,CAAC,CAACvB,CAAC,GAAG,IAAI;EACzB,IAAIyB,EAAE,GAAGF,CAAC,CAACjC,CAAC,GAAGgC,CAAC,CAAChC,CAAC;EAClB,IAAIoC,EAAE,GAAGH,CAAC,CAAChC,CAAC,GAAG+B,CAAC,CAAC/B,CAAC;EAClB,OAAOiC,EAAE,GAAG,CAAC,IAAIA,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;AAC9C;AAEA,SAASE,eAAeA,CAAC,cAAeN,CAAC,EAAE,qBAAsBO,CAAC,EAAE;EAClE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,CAAC,CAACE,MAAM,EAAE,EAAED,CAAC,EAAE;IACjC,IAAI,CAACH,YAAY,CAACL,CAAC,EAAEO,CAAC,CAACC,CAAC,CAAC,CAAC,EAAE;MAC1B,OAAO,KAAK;IACd;EACF;EACA,OAAO,IAAI;AACb;AAEA,SAASE,aAAaA,CAAC,cAAeV,CAAC,EAAE;EACvC,OAAO,IAAIxB,UAAU,CAAC,IAAI,EAAEwB,CAAC,CAAChC,CAAC,EAAEgC,CAAC,CAAC/B,CAAC,EAAE+B,CAAC,CAACtB,CAAC,CAAC;AAC5C;AAEA,SAASiC,aAAaA,CAAC,cAAeX,CAAC,EAAE,cAAeC,CAAC,EAAE;EACzD,IAAIW,EAAE,GAAGZ,CAAC,CAAChC,CAAC;IACV6C,EAAE,GAAGb,CAAC,CAAC/B,CAAC;IACR6C,EAAE,GAAGd,CAAC,CAACtB,CAAC;IACRqC,EAAE,GAAGd,CAAC,CAACjC,CAAC;IACRgD,EAAE,GAAGf,CAAC,CAAChC,CAAC;IACRgD,EAAE,GAAGhB,CAAC,CAACvB,CAAC;IACRwC,GAAG,GAAGH,EAAE,GAAGH,EAAE;IACbO,GAAG,GAAGH,EAAE,GAAGH,EAAE;IACbO,GAAG,GAAGH,EAAE,GAAGH,EAAE;IACbO,CAAC,GAAGhD,IAAI,CAACiD,IAAI,CAACJ,GAAG,GAAGA,GAAG,GAAGC,GAAG,GAAGA,GAAG,CAAC;EACtC,OAAO,IAAI3C,UAAU,CACnB,IAAI,EACJ,CAACoC,EAAE,GAAGG,EAAE,GAAIG,GAAG,GAAGG,CAAC,GAAID,GAAG,IAAI,CAAC,EAC/B,CAACP,EAAE,GAAGG,EAAE,GAAIG,GAAG,GAAGE,CAAC,GAAID,GAAG,IAAI,CAAC,EAC/B,CAACC,CAAC,GAAGP,EAAE,GAAGG,EAAE,IAAI,CAClB,CAAC;AACH;AAEA,SAASM,aAAaA,CAAC,cAAevB,CAAC,EAAE,cAAeC,CAAC,EAAE,cAAeuB,CAAC,EAAE;EAC3E,IAAIZ,EAAE,GAAGZ,CAAC,CAAChC,CAAC;IACV6C,EAAE,GAAGb,CAAC,CAAC/B,CAAC;IACR6C,EAAE,GAAGd,CAAC,CAACtB,CAAC;IACRqC,EAAE,GAAGd,CAAC,CAACjC,CAAC;IACRgD,EAAE,GAAGf,CAAC,CAAChC,CAAC;IACRgD,EAAE,GAAGhB,CAAC,CAACvB,CAAC;IACR+C,EAAE,GAAGD,CAAC,CAACxD,CAAC;IACR0D,EAAE,GAAGF,CAAC,CAACvD,CAAC;IACR0D,EAAE,GAAGH,CAAC,CAAC9C,CAAC;IACRkD,EAAE,GAAGhB,EAAE,GAAGG,EAAE;IACZc,EAAE,GAAGjB,EAAE,GAAGa,EAAE;IACZK,EAAE,GAAGjB,EAAE,GAAGG,EAAE;IACZe,EAAE,GAAGlB,EAAE,GAAGa,EAAE;IACZM,EAAE,GAAGf,EAAE,GAAGH,EAAE;IACZmB,EAAE,GAAGN,EAAE,GAAGb,EAAE;IACZoB,EAAE,GAAGtB,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;IAChCqB,EAAE,GAAGD,EAAE,GAAGnB,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;IACrCmB,EAAE,GAAGF,EAAE,GAAGT,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;IACrCU,EAAE,GAAGR,EAAE,GAAGC,EAAE,GAAGF,EAAE,GAAGG,EAAE;IACtBO,EAAE,GAAG,CAACR,EAAE,GAAGM,EAAE,GAAGL,EAAE,GAAGI,EAAE,KAAKE,EAAE,GAAG,CAAC,CAAC,GAAGzB,EAAE;IACxC2B,EAAE,GAAG,CAACR,EAAE,GAAGC,EAAE,GAAGF,EAAE,GAAGG,EAAE,IAAII,EAAE;IAC7BG,EAAE,GAAG,CAACX,EAAE,GAAGM,EAAE,GAAGP,EAAE,GAAGQ,EAAE,KAAKC,EAAE,GAAG,CAAC,CAAC,GAAGxB,EAAE;IACxC4B,EAAE,GAAG,CAACb,EAAE,GAAGK,EAAE,GAAGJ,EAAE,GAAGG,EAAE,IAAIK,EAAE;IAC7BK,CAAC,GAAGH,EAAE,GAAGA,EAAE,GAAGE,EAAE,GAAGA,EAAE,GAAG,CAAC;IACzBlC,CAAC,GAAG,CAAC,IAAIO,EAAE,GAAGwB,EAAE,GAAGC,EAAE,GAAGC,EAAE,GAAGC,EAAE,CAAC;IAChCE,CAAC,GAAGL,EAAE,GAAGA,EAAE,GAAGE,EAAE,GAAGA,EAAE,GAAG1B,EAAE,GAAGA,EAAE;IAC/BpC,CAAC,GAAG,EAAEgE,CAAC,GAAG,CAACnC,CAAC,GAAGlC,IAAI,CAACiD,IAAI,CAACf,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAGmC,CAAC,GAAGC,CAAC,CAAC,KAAK,CAAC,GAAGD,CAAC,CAAC,GAAGC,CAAC,GAAGpC,CAAC,CAAC;EACjE,OAAO,IAAI/B,UAAU,CAAC,IAAI,EAAEoC,EAAE,GAAG0B,EAAE,GAAGC,EAAE,GAAG7D,CAAC,EAAEmC,EAAE,GAAG2B,EAAE,GAAGC,EAAE,GAAG/D,CAAC,EAAEA,CAAC,CAAC;AACpE;AAEA,SAASkE,YAAYA,CAAC,qBAAsBrC,CAAC,EAAE;EAC7C,QAAQA,CAAC,CAACE,MAAM;IACd,KAAK,CAAC;MACJ,OAAOC,aAAa,CAACH,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5B,KAAK,CAAC;MACJ,OAAOI,aAAa,CAACJ,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC;IAClC,KAAK,CAAC;MACJ,OAAOgB,aAAa,CAAChB,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC;IACxC;MACE,MAAM,IAAIsC,KAAK,CACb,qDAAqD,GAAGtC,CAAC,CAACE,MAC5D,CAAC;EACL;AACF;AAEA,SAASqC,WAAWA,CAAC,qBAAsBvC,CAAC,EAAE,cAAewC,CAAC,EAAE;EAC9D,IAAIvC,CAAC,EAAEwC,CAAC;EAER,IAAI1C,eAAe,CAACyC,CAAC,EAAExC,CAAC,CAAC,EAAE,OAAO,CAACwC,CAAC,CAAC;;EAErC;EACA,KAAKvC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,CAAC,CAACE,MAAM,EAAE,EAAED,CAAC,EAAE;IAC7B,IAAIT,WAAW,CAACgD,CAAC,EAAExC,CAAC,CAACC,CAAC,CAAC,CAAC,IAAIF,eAAe,CAACK,aAAa,CAACJ,CAAC,CAACC,CAAC,CAAC,EAAEuC,CAAC,CAAC,EAAExC,CAAC,CAAC,EAAE;MACtE,OAAO,CAACA,CAAC,CAACC,CAAC,CAAC,EAAEuC,CAAC,CAAC;IAClB;EACF;;EAEA;EACA,KAAKvC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,CAAC,CAACE,MAAM,GAAG,CAAC,EAAE,EAAED,CAAC,EAAE;IACjC,KAAKwC,CAAC,GAAGxC,CAAC,GAAG,CAAC,EAAEwC,CAAC,GAAGzC,CAAC,CAACE,MAAM,EAAE,EAAEuC,CAAC,EAAE;MACjC,IACEjD,WAAW,CAACY,aAAa,CAACJ,CAAC,CAACC,CAAC,CAAC,EAAED,CAAC,CAACyC,CAAC,CAAC,CAAC,EAAED,CAAC,CAAC,IACzChD,WAAW,CAACY,aAAa,CAACJ,CAAC,CAACC,CAAC,CAAC,EAAEuC,CAAC,CAAC,EAAExC,CAAC,CAACyC,CAAC,CAAC,CAAC,IACzCjD,WAAW,CAACY,aAAa,CAACJ,CAAC,CAACyC,CAAC,CAAC,EAAED,CAAC,CAAC,EAAExC,CAAC,CAACC,CAAC,CAAC,CAAC,IACzCF,eAAe,CAACiB,aAAa,CAAChB,CAAC,CAACC,CAAC,CAAC,EAAED,CAAC,CAACyC,CAAC,CAAC,EAAED,CAAC,CAAC,EAAExC,CAAC,CAAC,EAChD;QACA,OAAO,CAACA,CAAC,CAACC,CAAC,CAAC,EAAED,CAAC,CAACyC,CAAC,CAAC,EAAED,CAAC,CAAC;MACxB;IACF;EACF;;EAEA;EACA,MAAM,IAAIF,KAAK,CAAC,qDAAqD,CAAC;AACxE;AAEA,SAASI,KAAKA,CAAC,cAAeC,IAAI,EAAE;EAClC,IAAIlD,CAAC,GAAGkD,IAAI,CAACtE,aAAa;EAC1B,IAAIqB,CAAC,GAAGiD,IAAI,CAACnE,IAAI,CAACH,aAAa;EAC/B,IAAIyD,EAAE,GAAGrC,CAAC,CAACtB,CAAC,GAAGuB,CAAC,CAACvB,CAAC;EAClB,IAAIyB,EAAE,GAAG,CAACH,CAAC,CAAChC,CAAC,GAAGiC,CAAC,CAACvB,CAAC,GAAGuB,CAAC,CAACjC,CAAC,GAAGgC,CAAC,CAACtB,CAAC,IAAI2D,EAAE;EACrC,IAAIjC,EAAE,GAAG,CAACJ,CAAC,CAAC/B,CAAC,GAAGgC,CAAC,CAACvB,CAAC,GAAGuB,CAAC,CAAChC,CAAC,GAAG+B,CAAC,CAACtB,CAAC,IAAI2D,EAAE;EACrC,OAAOlC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;AAC1B;AAEA,SAAS+C,OAAOA,CAACC,OAAO,EAAEC,WAAW,EAAE;EACrC,IAAI7C,CAAC,GAAG,CAAC;EACT,IAAI8C,UAAU,GAAGF,OAAO,CAACG,KAAK,CAAC,CAAC;EAEhC,IAAIC,CAAC,GAAGJ,OAAO,CAAC3C,MAAM;EACtB,IAAIF,CAAC,GAAG,EAAE;EACV,IAAIwC,CAAC;EACL,IAAIU,CAAC;EACLJ,WAAW,CAACC,UAAU,CAAC;EACvB,OAAO9C,CAAC,GAAGgD,CAAC,EAAE;IACZT,CAAC,GAAGO,UAAU,CAAC9C,CAAC,CAAC;IACjB,IAAIiD,CAAC,IAAIpD,YAAY,CAACoD,CAAC,EAAEV,CAAC,CAAC,EAAE;MAC3B,EAAEvC,CAAC;IACL,CAAC,MAAM;MACLD,CAAC,GAAGuC,WAAW,CAACvC,CAAC,EAAEwC,CAAC,CAAC;MACrBU,CAAC,GAAGb,YAAY,CAACrC,CAAC,CAAC;MACnBC,CAAC,GAAG,CAAC;IACP;EACF;EACA,OAAOiD,CAAC;AACV;AAEA,SAASC,KAAKA,CAAC,cAAezD,CAAC,EAAE,cAAeD,CAAC,EAAE,cAAewB,CAAC,EAAE;EACnE,IAAIrB,EAAE,GAAGF,CAAC,CAACjC,CAAC,GAAGgC,CAAC,CAAChC,CAAC;IAChBA,CAAC;IACD4D,EAAE;IACFxB,EAAE,GAAGH,CAAC,CAAChC,CAAC,GAAG+B,CAAC,CAAC/B,CAAC;IACdA,CAAC;IACD6D,EAAE;IACFK,EAAE,GAAGhC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;EACxB,IAAI+B,EAAE,EAAE;IACNP,EAAE,GAAG5B,CAAC,CAACtB,CAAC,GAAG8C,CAAC,CAAC9C,CAAC;IACdkD,EAAE,IAAIA,EAAE;IACRE,EAAE,GAAG7B,CAAC,CAACvB,CAAC,GAAG8C,CAAC,CAAC9C,CAAC;IACdoD,EAAE,IAAIA,EAAE;IACR,IAAIF,EAAE,GAAGE,EAAE,EAAE;MACX9D,CAAC,GAAG,CAACmE,EAAE,GAAGL,EAAE,GAAGF,EAAE,KAAK,CAAC,GAAGO,EAAE,CAAC;MAC7BlE,CAAC,GAAGI,IAAI,CAACiD,IAAI,CAACjD,IAAI,CAACsF,GAAG,CAAC,CAAC,EAAE7B,EAAE,GAAGK,EAAE,GAAGnE,CAAC,GAAGA,CAAC,CAAC,CAAC;MAC3CwD,CAAC,CAACxD,CAAC,GAAGiC,CAAC,CAACjC,CAAC,GAAGA,CAAC,GAAGmC,EAAE,GAAGlC,CAAC,GAAGmC,EAAE;MAC3BoB,CAAC,CAACvD,CAAC,GAAGgC,CAAC,CAAChC,CAAC,GAAGD,CAAC,GAAGoC,EAAE,GAAGnC,CAAC,GAAGkC,EAAE;IAC7B,CAAC,MAAM;MACLnC,CAAC,GAAG,CAACmE,EAAE,GAAGP,EAAE,GAAGE,EAAE,KAAK,CAAC,GAAGK,EAAE,CAAC;MAC7BlE,CAAC,GAAGI,IAAI,CAACiD,IAAI,CAACjD,IAAI,CAACsF,GAAG,CAAC,CAAC,EAAE/B,EAAE,GAAGO,EAAE,GAAGnE,CAAC,GAAGA,CAAC,CAAC,CAAC;MAC3CwD,CAAC,CAACxD,CAAC,GAAGgC,CAAC,CAAChC,CAAC,GAAGA,CAAC,GAAGmC,EAAE,GAAGlC,CAAC,GAAGmC,EAAE;MAC3BoB,CAAC,CAACvD,CAAC,GAAG+B,CAAC,CAAC/B,CAAC,GAAGD,CAAC,GAAGoC,EAAE,GAAGnC,CAAC,GAAGkC,EAAE;IAC7B;EACF,CAAC,MAAM;IACLqB,CAAC,CAACxD,CAAC,GAAGgC,CAAC,CAAChC,CAAC,GAAGwD,CAAC,CAAC9C,CAAC;IACf8C,CAAC,CAACvD,CAAC,GAAG+B,CAAC,CAAC/B,CAAC;EACX;AACF;AAEA,SAAS2F,UAAUA,CAAC,cAAe5D,CAAC,EAAE,cAAeC,CAAC,EAAE;EACtD,IAAIC,EAAE,GAAGF,CAAC,CAACtB,CAAC,GAAGuB,CAAC,CAACvB,CAAC,GAAG,IAAI;IACvByB,EAAE,GAAGF,CAAC,CAACjC,CAAC,GAAGgC,CAAC,CAAChC,CAAC;IACdoC,EAAE,GAAGH,CAAC,CAAChC,CAAC,GAAG+B,CAAC,CAAC/B,CAAC;EAChB,OAAOiC,EAAE,GAAG,CAAC,IAAIA,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;AAC9C;AAEA,SAASyD,WAAWA,CAAC,qBAAsBT,OAAO,EAAEC,WAAW,EAAE;EAC/D,IAAIG,CAAC,GAAGJ,OAAO,CAAC3C,MAAM;EACtB,IAAI+C,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC;EAErB,IAAIxD,CAAC,EAAEC,CAAC,EAAEuB,CAAC,EAAEsC,EAAE,EAAEC,EAAE,EAAEvD,CAAC,EAAEwC,CAAC,EAAEgB,CAAC,EAAEC,EAAE,EAAEC,EAAE;;EAEpC;EACAlE,CAAC,GAAGoD,OAAO,CAAC,CAAC,CAAC;EACdpD,CAAC,CAAChC,CAAC,GAAG,CAAC;EACPgC,CAAC,CAAC/B,CAAC,GAAG,CAAC;EACP,IAAIuF,CAAC,IAAI,CAAC,EAAE,OAAOxD,CAAC,CAACtB,CAAC;;EAEtB;EACAuB,CAAC,GAAGmD,OAAO,CAAC,CAAC,CAAC;EACdpD,CAAC,CAAChC,CAAC,GAAG,CAACiC,CAAC,CAACvB,CAAC;EACVuB,CAAC,CAACjC,CAAC,GAAGgC,CAAC,CAACtB,CAAC;EACTuB,CAAC,CAAChC,CAAC,GAAG,CAAC;EACP,IAAIuF,CAAC,IAAI,CAAC,EAAE,OAAOxD,CAAC,CAACtB,CAAC,GAAGuB,CAAC,CAACvB,CAAC;;EAE5B;EACA8C,CAAC,GAAG4B,OAAO,CAAC,CAAC,CAAC;EACdM,KAAK,CAACzD,CAAC,EAAED,CAAC,EAAEwB,CAAC,CAAC;;EAEd;EACAxB,CAAC,GAAG,IAAIxB,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAEwB,CAAC,CAAC;EAC7CC,CAAC,GAAG,IAAIzB,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAEyB,CAAC,CAAC;EAC7CuB,CAAC,GAAG,IAAIhD,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAEgD,CAAC,CAAC;EAC7CxB,CAAC,CAACjB,IAAI,GAAGyC,CAAC,CAACxC,QAAQ,GAAGiB,CAAC;EACvBA,CAAC,CAAClB,IAAI,GAAGiB,CAAC,CAAChB,QAAQ,GAAGwC,CAAC;EACvBA,CAAC,CAACzC,IAAI,GAAGkB,CAAC,CAACjB,QAAQ,GAAGgB,CAAC;;EAEvB;EACAmE,IAAI,EAAE,KAAK3D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgD,CAAC,EAAE,EAAEhD,CAAC,EAAE;IAC5BgB,CAAC,GAAG4B,OAAO,CAAC5C,CAAC,CAAC;IACdkD,KAAK,CAAC1D,CAAC,CAACpB,aAAa,EAAEqB,CAAC,CAACrB,aAAa,EAAE4C,CAAC,CAAC;IAC1CA,CAAC,GAAG,IAAIhD,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAEgD,CAAC,CAAC;;IAE7C;IACA;IACA;IACAwB,CAAC,GAAG/C,CAAC,CAAClB,IAAI;IACViF,CAAC,GAAGhE,CAAC,CAAChB,QAAQ;IACdiF,EAAE,GAAGhE,CAAC,CAACrB,aAAa,CAACF,CAAC;IACtBwF,EAAE,GAAGlE,CAAC,CAACpB,aAAa,CAACF,CAAC;IACtB,GAAG;MACD,IAAIuF,EAAE,IAAIC,EAAE,EAAE;QACZ,IAAIN,UAAU,CAACZ,CAAC,CAACpE,aAAa,EAAE4C,CAAC,CAAC5C,aAAa,CAAC,EAAE;UAChDqB,CAAC,GAAG+C,CAAC;UACLhD,CAAC,CAACjB,IAAI,GAAGkB,CAAC;UACVA,CAAC,CAACjB,QAAQ,GAAGgB,CAAC;UACd,EAAEQ,CAAC;UACH,SAAS2D,IAAI;QACf;QACAF,EAAE,IAAIjB,CAAC,CAACpE,aAAa,CAACF,CAAC;QACvBsE,CAAC,GAAGA,CAAC,CAACjE,IAAI;MACZ,CAAC,MAAM;QACL,IAAI6E,UAAU,CAACI,CAAC,CAACpF,aAAa,EAAE4C,CAAC,CAAC5C,aAAa,CAAC,EAAE;UAChDoB,CAAC,GAAGgE,CAAC;UACLhE,CAAC,CAACjB,IAAI,GAAGkB,CAAC;UACVA,CAAC,CAACjB,QAAQ,GAAGgB,CAAC;UACd,EAAEQ,CAAC;UACH,SAAS2D,IAAI;QACf;QACAD,EAAE,IAAIF,CAAC,CAACpF,aAAa,CAACF,CAAC;QACvBsF,CAAC,GAAGA,CAAC,CAAChF,QAAQ;MAChB;IACF,CAAC,QAAQgE,CAAC,KAAKgB,CAAC,CAACjF,IAAI;;IAErB;IACAyC,CAAC,CAACxC,QAAQ,GAAGgB,CAAC;IACdwB,CAAC,CAACzC,IAAI,GAAGkB,CAAC;IACVD,CAAC,CAACjB,IAAI,GAAGkB,CAAC,CAACjB,QAAQ,GAAGiB,CAAC,GAAGuB,CAAC;;IAE3B;IACAsC,EAAE,GAAGb,KAAK,CAACjD,CAAC,CAAC;IACb,OAAO,CAACwB,CAAC,GAAGA,CAAC,CAACzC,IAAI,MAAMkB,CAAC,EAAE;MACzB,IAAI,CAAC8D,EAAE,GAAGd,KAAK,CAACzB,CAAC,CAAC,IAAIsC,EAAE,EAAE;QACxB9D,CAAC,GAAGwB,CAAC;QACLsC,EAAE,GAAGC,EAAE;MACT;IACF;IACA9D,CAAC,GAAGD,CAAC,CAACjB,IAAI;EACZ;;EAEA;EACAiB,CAAC,GAAG,CAACC,CAAC,CAACrB,aAAa,CAAC;EACrB4C,CAAC,GAAGvB,CAAC;EACL,IAAImE,MAAM,GAAG,KAAK;EAClB,OAAO,CAAC5C,CAAC,GAAGA,CAAC,CAACzC,IAAI,MAAMkB,CAAC,EAAE;IACzB,IAAI,EAAEmE,MAAM,KAAK,CAAC,EAAE;MAClB;IACF;IACApE,CAAC,CAACqE,IAAI,CAAC7C,CAAC,CAAC5C,aAAa,CAAC;EACzB;EACA4C,CAAC,GAAG2B,OAAO,CAACnD,CAAC,EAAEqD,WAAW,CAAC;;EAE3B;EACA,KAAK7C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgD,CAAC,EAAE,EAAEhD,CAAC,EAAE;IACtBR,CAAC,GAAGoD,OAAO,CAAC5C,CAAC,CAAC;IACdR,CAAC,CAAChC,CAAC,IAAIwD,CAAC,CAACxD,CAAC;IACVgC,CAAC,CAAC/B,CAAC,IAAIuD,CAAC,CAACvD,CAAC;EACZ;EACA,OAAOuD,CAAC,CAAC9C,CAAC;AACZ;AAEA,SAAS4F,aAAaA,CAAC,cAAe1E,YAAY,EAAEyD,WAAW,EAAE;EAC/D,IAAI3E,CAAC,GAAG,CAAC;EACT,IAAIkB,YAAY,CAACV,WAAW,CAAC,CAAC,EAAE;IAC9B;IACA,KAAK,IAAIO,GAAG,IAAIG,YAAY,CAACf,QAAQ,EAAE;MACrC,IAAIiB,MAAM,GAAGF,YAAY,CAACf,QAAQ,CAACY,GAAG,CAAC;MACvC,IAAIK,MAAM,CAACZ,WAAW,CAAC,CAAC,EAAE;QACxBY,MAAM,CAACpB,CAAC,GAAG4F,aAAa,CAACxE,MAAM,EAAEuD,WAAW,CAAC;MAC/C;IACF;IACA;IACA3E,CAAC,GAAGmF,WAAW,CAACU,MAAM,CAACC,MAAM,CAAC5E,YAAY,CAACf,QAAQ,CAAC,EAAEwE,WAAW,CAAC;EACpE;EACA,OAAO3E,CAAC;AACV;AAEA,SAAS+F,qBAAqBA,CAAC,cAAe7E,YAAY,EAAEyD,WAAW,EAAE;EACvEiB,aAAa,CAAC1E,YAAY,EAAEyD,WAAW,CAAC;EACxC,KAAK,IAAI5D,GAAG,IAAIG,YAAY,CAACf,QAAQ,EAAE;IACrC,IAAIiB,MAAM,GAAGF,YAAY,CAACf,QAAQ,CAACY,GAAG,CAAC;IACvCK,MAAM,CAACP,uBAAuB,CAAC,CAAC;EAClC;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASmF,uBAAuBA,CAACC,MAAM,EAAEhF,KAAK,EAAEiF,OAAO,EAAE;EACvD,IAAI,CAAChH,OAAO,CAAC+B,KAAK,CAAC,EACjB,MAAM,IAAIkD,KAAK,CACb,mFACF,CAAC;EAEH+B,OAAO,GAAGlH,eAAe,CAACkH,OAAO,EAAE9G,QAAQ,CAAC;EAE5C,IAAI+B,MAAM,GAAG,CAAC,CAAC;IACbgF,SAAS,GAAG,CAAC,CAAC;IACdC,KAAK,GAAGnF,KAAK,CAACmF,KAAK,CAAC,CAAC;IACrB5G,MAAM,GAAG0G,OAAO,CAAC1G,MAAM;IACvBC,mBAAmB,GAAGyG,OAAO,CAACzG,mBAAmB;IACjDkF,WAAW,GAAGxF,OAAO,CAACkH,oBAAoB,CAACH,OAAO,CAACxG,GAAG,CAAC;IACvDG,KAAK,GAAGqG,OAAO,CAACrG,KAAK;EAEvB,IAAIyG,SAAS,GAAG,IAAIxG,UAAU,CAAC,CAAC;EAEhCmB,KAAK,CAACsF,WAAW,CAAC,UAAUxF,GAAG,EAAE1B,UAAU,EAAE;IAC3C,IAAIW,CAAC,GAAGX,UAAU,CAACmH,IAAI,GAAGnH,UAAU,CAACmH,IAAI,GAAG,CAAC;IAC7C,IAAIC,aAAa,GAAG,IAAI3G,UAAU,CAACiB,GAAG,EAAE,IAAI,EAAE,IAAI,EAAEf,CAAC,CAAC;IACtD,IAAI0G,eAAe,GAAGJ,SAAS;IAE/B7G,mBAAmB,CAACkH,OAAO,CAAC,UAAUC,CAAC,EAAE;MACvC,IAAIC,IAAI,GAAGxH,UAAU,CAACuH,CAAC,CAAC;MACxBF,eAAe,GAAGA,eAAe,CAAC/F,QAAQ,CAACkG,IAAI,CAAC;IAClD,CAAC,CAAC;IAEFH,eAAe,CAACjG,QAAQ,CAACM,GAAG,EAAE0F,aAAa,CAAC;EAC9C,CAAC,CAAC;EACFV,qBAAqB,CAACO,SAAS,EAAE3B,WAAW,CAAC;EAC7C3D,OAAO,CAACC,KAAK,EAAEqF,SAAS,EAAEnF,MAAM,CAAC;EACjC,IAAIwB,CAAC,GAAGyD,KAAK,CAACrE,MAAM;IAClBzC,CAAC;IACDC,CAAC;IACDuC,CAAC;EACH,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGa,CAAC,EAAEb,CAAC,EAAE,EAAE;IACtB,IAAI0C,IAAI,GAAG4B,KAAK,CAACtE,CAAC,CAAC;IAEnBxC,CAAC,GAAGE,MAAM,GAAGK,KAAK,GAAGsB,MAAM,CAACqD,IAAI,CAAC,CAAClF,CAAC;IACnCC,CAAC,GAAGC,MAAM,GAAGK,KAAK,GAAGsB,MAAM,CAACqD,IAAI,CAAC,CAACjF,CAAC;IAEnC4G,SAAS,CAAC3B,IAAI,CAAC,GAAG;MAChBlF,CAAC,EAAEA,CAAC;MACJC,CAAC,EAAEA;IACL,CAAC;IAED,IAAI0G,MAAM,EAAE;MACVhF,KAAK,CAAC6F,gBAAgB,CAACtC,IAAI,EAAE0B,OAAO,CAAC7G,UAAU,CAACC,CAAC,EAAEA,CAAC,CAAC;MACrD2B,KAAK,CAAC6F,gBAAgB,CAACtC,IAAI,EAAE0B,OAAO,CAAC7G,UAAU,CAACE,CAAC,EAAEA,CAAC,CAAC;IACvD;EACF;EACA,OAAO4G,SAAS;AAClB;AAEA,IAAIY,gBAAgB,GAAGf,uBAAuB,CAACgB,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;AAChED,gBAAgB,CAACd,MAAM,GAAGD,uBAAuB,CAACgB,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;AAElEC,MAAM,CAACC,OAAO,GAAGH,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}